<script>
    document.getElementById("predictForm").onsubmit = async function(event) {
        event.preventDefault();
        
        let formData = {
            Rooms: parseInt(document.getElementById("rooms").value),
            Distance: parseFloat(document.getElementById("distance").value),
            Landsize: parseFloat(document.getElementById("landsize").value),
            BuildingArea: parseFloat(document.getElementById("buildingArea").value),
            YearBuilt: parseInt(document.getElementById("yearBuilt").value),

            // Fill missing fields with defaults
            Suburb: "Unknown",
            Address: "Unknown",
            Type: "h",
            Method: "S",
            Seller: "GenericAgent",
            Date: "2025-01-01",
            Postcode: 3000,
            Bedroom2: parseInt(document.getElementById("rooms").value),  // Use same value as Rooms
            Bathroom: 1,
            Car: 1,
            CouncilArea: "Generic Council",
            Lattitude: -37.8136,
            Longtitude: 144.9631,
            Region: "Northern Metropolitan",
            Propertycount: 5000
        };

        let response = await fetch("/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(formData)
        });

        let result = await response.json();
        document.getElementById("predictionResult").innerText = 
            result.prediction ? "Predicted Price: $" + result.prediction.toFixed(2) : "Error: " + result.error;
    };
</script>
